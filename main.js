(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=null,t=document.getElementById("add-text-btn"),n=document.getElementById("meme-container"),l=document.getElementById("align-top"),o=document.getElementById("align-down"),d=document.getElementById("align-left"),i=document.getElementById("align-right"),a=document.getElementById("save-meme-btn"),c=document.getElementById("delete-btn"),s=document.getElementById("meme-image");function m(t){if(e){var n=parseInt(e.style.left),l=parseInt(e.style.top);switch(t){case"top":e.style.top=l-10+"px";break;case"bottom":e.style.top=l+10+"px";break;case"left":e.style.left=n-10+"px";break;case"right":e.style.left=n+10+"px"}}}var r=document.getElementById("image-input");function u(e,t){var n;e.addEventListener("mousedown",(function(){m(t),n=setInterval((function(){return m(t)}),100)})),e.addEventListener("mouseup",(function(){clearInterval(n)}))}r.addEventListener("change",(function(){var e=r.files[0];if(e){var t=new FileReader;t.onload=function(e){s.src=e.target.result},t.readAsDataURL(e)}})),n.addEventListener("mousedown",(function(t){e=null,document.querySelectorAll(".text-element").forEach((function(e){e.classList.remove("text-element__highlight")})),t.target.classList.contains("text-element")&&(e=t.target).classList.add("text-element__highlight")})),u(l,"top"),u(o,"bottom"),u(d,"left"),u(i,"right"),t.addEventListener("click",(function(){var e=document.getElementById("text-input").value;if(e){var t=document.getElementById("text-color").value,l=document.getElementById("edit-text-size").value+"px",o=document.getElementById("bold").checked,d=document.getElementById("italic").checked,i=document.getElementById("edit-font").value,a=document.createElement("div");a.classList.add("text-element"),a.innerText=e,a.style.position="absolute",a.style.color=t,a.style.fontSize=l,a.style.fontWeight=o?"bold":"normal",a.style.fontStyle=d?"italic":"normal",a.style.fontFamily=i,a.style.top="10px",a.style.left="10px",n.appendChild(a)}})),a.addEventListener("click",(function(){var e=document.createElement("canvas");e.width=n.offsetWidth,e.height=n.offsetHeight;var t=e.getContext("2d");t.drawImage(s,0,0),document.querySelectorAll(".text-element").forEach((function(e){var n=e.style.fontStyle+" "+e.style.fontWeight+" "+e.style.fontSize+" "+e.style.fontFamily;t.font="".concat(n),t.fillStyle=e.style.color,t.fillText(e.innerText,parseInt(e.style.left),parseInt(e.style.top)+parseInt(e.style.fontSize))}));var l=e.toDataURL("image/png"),o=document.createElement("a");o.href=l,o.download="meme.png",o.click()})),c.addEventListener("click",(function(){e&&(e.remove(),e=null)})),s.onload=function(){n.style.width=s.width+"px",n.style.height=s.height+"px"};var y=document.getElementById("tooltip-icon"),f=document.getElementById("tooltip");y.addEventListener("mouseover",(function(){f.style.display="block"})),y.addEventListener("mouseout",(function(){f.style.display="none"}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGdCQUN0QzRFLEVBQVVoRixTQUFTSSxlQUFlLFdBRXhDMkUsRUFBWTlFLGlCQUFpQixhQUFhLFdBQ3hDK0UsRUFBUS9ELE1BQU1nRSxRQUFVLE9BQzFCLElBRUFGLEVBQVk5RSxpQkFBaUIsWUFBWSxXQUN2QytFLEVBQVEvRCxNQUFNZ0UsUUFBVSxNQUMxQixHQUNGLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93Yi1sMi1tZW1lZ2VuZXJhdG9yLy4vc3JjL2pzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuLi9hc3NldHMvc3R5bGVzL2luZGV4LmNzcyc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGxldCBzZWxlY3RlZFRleHRFbGVtZW50ID0gbnVsbDtcbiAgY29uc3QgYnRuQWRkVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXRleHQtYnRuXCIpO1xuICBjb25zdCBtZW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW1lLWNvbnRhaW5lclwiKTtcbiAgY29uc3QgYWxpZ25Ub3BCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsaWduLXRvcFwiKTtcbiAgY29uc3QgYWxpZ25Eb3duQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGlnbi1kb3duXCIpO1xuICBjb25zdCBhbGlnbkxlZnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsaWduLWxlZnRcIik7XG4gIGNvbnN0IGFsaWduUmlnaHRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsaWduLXJpZ2h0XCIpO1xuICBjb25zdCBzYXZlTWVtZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2F2ZS1tZW1lLWJ0blwiKTtcbiAgY29uc3QgZGVsZXRlVHh0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGUtYnRuXCIpO1xuICBjb25zdCBtZW1lSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbWUtaW1hZ2VcIik7XG5cbiAgZnVuY3Rpb24gYWRkVGV4dCgpIHtcbiAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0LWlucHV0XCIpLnZhbHVlO1xuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0LWNvbG9yXCIpLnZhbHVlO1xuICAgIGNvbnN0IGZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRleHQtc2l6ZVwiKS52YWx1ZSArIFwicHhcIjtcbiAgICBjb25zdCBpc0JvbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvbGRcIikuY2hlY2tlZDtcbiAgICBjb25zdCBpc0l0YWxpYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaXRhbGljXCIpLmNoZWNrZWQ7XG4gICAgY29uc3QgZm9udEZhbWlseSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1mb250XCIpLnZhbHVlO1xuXG4gICAgY29uc3QgdG9wVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRvcFRleHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWVsZW1lbnRcIik7XG4gICAgdG9wVGV4dEVsZW1lbnQuaW5uZXJUZXh0ID0gdGV4dDtcbiAgICB0b3BUZXh0RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgdG9wVGV4dEVsZW1lbnQuc3R5bGUuY29sb3IgPSB0ZXh0Q29sb3I7XG4gICAgdG9wVGV4dEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZTtcbiAgICB0b3BUZXh0RWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gaXNCb2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiO1xuICAgIHRvcFRleHRFbGVtZW50LnN0eWxlLmZvbnRTdHlsZSA9IGlzSXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCI7XG4gICAgdG9wVGV4dEVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IGZvbnRGYW1pbHk7XG4gICAgdG9wVGV4dEVsZW1lbnQuc3R5bGUudG9wID0gMTAgKyAncHgnO1xuICAgIHRvcFRleHRFbGVtZW50LnN0eWxlLmxlZnQgPSBcIjEwcHhcIjtcblxuICAgIG1lbWVDb250YWluZXIuYXBwZW5kQ2hpbGQodG9wVGV4dEVsZW1lbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWxpZ25UZXh0KGRpcmVjdGlvbikge1xuICAgIGlmIChzZWxlY3RlZFRleHRFbGVtZW50KSB7XG4gICAgICBjb25zdCBjdXJyZW50TGVmdCA9IHBhcnNlSW50KHNlbGVjdGVkVGV4dEVsZW1lbnQuc3R5bGUubGVmdCk7XG4gICAgICBjb25zdCBjdXJyZW50VG9wID0gcGFyc2VJbnQoc2VsZWN0ZWRUZXh0RWxlbWVudC5zdHlsZS50b3ApO1xuICAgICAgY29uc3Qgc3RlcCA9IDEwOyAvLyDQqNCw0LMg0L/QtdGA0LXQvNC10YnQtdC90LjRj1xuXG4gICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIHNlbGVjdGVkVGV4dEVsZW1lbnQuc3R5bGUudG9wID0gY3VycmVudFRvcCAtIHN0ZXAgKyBcInB4XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgc2VsZWN0ZWRUZXh0RWxlbWVudC5zdHlsZS50b3AgPSBjdXJyZW50VG9wICsgc3RlcCArIFwicHhcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgc2VsZWN0ZWRUZXh0RWxlbWVudC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgLSBzdGVwICsgXCJweFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgc2VsZWN0ZWRUZXh0RWxlbWVudC5zdHlsZS5sZWZ0ID0gY3VycmVudExlZnQgKyBzdGVwICsgXCJweFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNhdmVNZW1lKCkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgY2FudmFzLndpZHRoID0gbWVtZUNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gbWVtZUNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGN0eC5kcmF3SW1hZ2UobWVtZUltYWdlLCAwLCAwKTtcblxuICAgIC8vINCe0YLRgNC40YHQvtCy0YvQstCw0LXQvCDRgtC10LrRgdGC0L7QstGL0LUg0Y3Qu9C10LzQtdC90YLRiyDQvdCwINGF0L7Qu9GB0YLQtVxuICAgIGNvbnN0IHRleHRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGV4dC1lbGVtZW50XCIpO1xuICAgIHRleHRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBmb250ID0gZWxlbWVudC5zdHlsZS5mb250U3R5bGUgKyAnICcgKyBlbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQgKyAnICcgKyBlbGVtZW50LnN0eWxlLmZvbnRTaXplICsgJyAnICsgZWxlbWVudC5zdHlsZS5mb250RmFtaWx5O1xuICAgICAgY3R4LmZvbnQgPSBgJHtmb250fWA7XG4gICAgICBjdHguZmlsbFN0eWxlID0gZWxlbWVudC5zdHlsZS5jb2xvcjtcbiAgICAgIGN0eC5maWxsVGV4dChlbGVtZW50LmlubmVyVGV4dCwgcGFyc2VJbnQoZWxlbWVudC5zdHlsZS5sZWZ0KSwgcGFyc2VJbnQoZWxlbWVudC5zdHlsZS50b3ApICsgcGFyc2VJbnQoZWxlbWVudC5zdHlsZS5mb250U2l6ZSkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbWVtZURhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xuXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGxpbmsuaHJlZiA9IG1lbWVEYXRhVVJMO1xuICAgIGxpbmsuZG93bmxvYWQgPSBcIm1lbWUucG5nXCI7XG4gICAgbGluay5jbGljaygpO1xuICB9XG5cbiAgY29uc3QgaW1hZ2VJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2UtaW5wdXRcIik7XG4gIGltYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBmaWxlID0gaW1hZ2VJbnB1dC5maWxlc1swXTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbWVtZUltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1lbWVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIHNlbGVjdGVkVGV4dEVsZW1lbnQgPSBudWxsO1xuICAgIGNvbnN0IHRleHRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGV4dC1lbGVtZW50XCIpO1xuICAgIHRleHRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZWxlbWVudF9faGlnaGxpZ2h0JylcbiAgICB9KTtcblxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGV4dC1lbGVtZW50XCIpKSB7XG4gICAgICBzZWxlY3RlZFRleHRFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgc2VsZWN0ZWRUZXh0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd0ZXh0LWVsZW1lbnRfX2hpZ2hsaWdodCcpXG4gICAgfVxuICB9KTtcblxuXG4gIGZ1bmN0aW9uIGFkZEFsaWdubWVudEhhbmRsZXJzKGJ1dHRvbiwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IGludGVydmFsSWQ7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xuICAgICAgYWxpZ25UZXh0KGRpcmVjdGlvbik7XG4gICAgICBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gYWxpZ25UZXh0KGRpcmVjdGlvbiksIDEwMCk7XG4gICAgfSk7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRBbGlnbm1lbnRIYW5kbGVycyhhbGlnblRvcEJ0biwgJ3RvcCcpO1xuICBhZGRBbGlnbm1lbnRIYW5kbGVycyhhbGlnbkRvd25CdG4sICdib3R0b20nKTtcbiAgYWRkQWxpZ25tZW50SGFuZGxlcnMoYWxpZ25MZWZ0QnRuLCAnbGVmdCcpO1xuICBhZGRBbGlnbm1lbnRIYW5kbGVycyhhbGlnblJpZ2h0QnRuLCAncmlnaHQnKTtcblxuICBidG5BZGRUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVGV4dCk7XG4gIHNhdmVNZW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZU1lbWUpO1xuICBkZWxldGVUeHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZFRleHRFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZWN0ZWRUZXh0RWxlbWVudC5yZW1vdmUoKTtcbiAgICBzZWxlY3RlZFRleHRFbGVtZW50ID0gbnVsbDtcbiAgfSk7XG5cbiAgbWVtZUltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIG1lbWVDb250YWluZXIuc3R5bGUud2lkdGggPSBtZW1lSW1hZ2Uud2lkdGggKyBcInB4XCI7XG4gICAgbWVtZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtZW1lSW1hZ2UuaGVpZ2h0ICsgXCJweFwiO1xuICB9O1xuXG4gIGNvbnN0IHRvb2x0aXBJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2x0aXAtaWNvbicpO1xuICBjb25zdCB0b29sdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2x0aXAnKTtcblxuICB0b29sdGlwSWNvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4gICAgdG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfSk7XG5cbiAgdG9vbHRpcEljb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgdG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbGVjdGVkVGV4dEVsZW1lbnQiLCJidG5BZGRUZXh0IiwiZ2V0RWxlbWVudEJ5SWQiLCJtZW1lQ29udGFpbmVyIiwiYWxpZ25Ub3BCdG4iLCJhbGlnbkRvd25CdG4iLCJhbGlnbkxlZnRCdG4iLCJhbGlnblJpZ2h0QnRuIiwic2F2ZU1lbWVCdG4iLCJkZWxldGVUeHRCdG4iLCJtZW1lSW1hZ2UiLCJhbGlnblRleHQiLCJkaXJlY3Rpb24iLCJjdXJyZW50TGVmdCIsInBhcnNlSW50Iiwic3R5bGUiLCJsZWZ0IiwiY3VycmVudFRvcCIsInRvcCIsImltYWdlSW5wdXQiLCJhZGRBbGlnbm1lbnRIYW5kbGVycyIsImJ1dHRvbiIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJmaWxlIiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZSIsInNyYyIsInRhcmdldCIsInJlc3VsdCIsInJlYWRBc0RhdGFVUkwiLCJldmVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImNvbnRhaW5zIiwiYWRkIiwidGV4dCIsInZhbHVlIiwidGV4dENvbG9yIiwiZm9udFNpemUiLCJpc0JvbGQiLCJjaGVja2VkIiwiaXNJdGFsaWMiLCJmb250RmFtaWx5IiwidG9wVGV4dEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJUZXh0IiwicG9zaXRpb24iLCJjb2xvciIsImZvbnRXZWlnaHQiLCJmb250U3R5bGUiLCJhcHBlbmRDaGlsZCIsImNhbnZhcyIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiZm9udCIsImNvbmNhdCIsImZpbGxTdHlsZSIsImZpbGxUZXh0IiwibWVtZURhdGFVUkwiLCJ0b0RhdGFVUkwiLCJsaW5rIiwiaHJlZiIsImRvd25sb2FkIiwiY2xpY2siLCJ0b29sdGlwSWNvbiIsInRvb2x0aXAiLCJkaXNwbGF5Il0sInNvdXJjZVJvb3QiOiIifQ==